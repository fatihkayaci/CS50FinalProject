{% extends "admin/adminlayout.html" %}
{% block main %}
<div class="container-fluid mt-4">
    <ul class="nav nav-tabs" id="settingsTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="main-tab" data-bs-toggle="tab" data-bs-target="#main" type="button" role="tab" aria-controls="main" aria-selected="true">Ana Sayfa</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab" aria-controls="services" aria-selected="false">Hizmetler Sayfa</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="archive-tab" data-bs-toggle="tab" data-bs-target="#archive" type="button" role="tab" aria-controls="archive" aria-selected="false">Arşiv Sayfa</button>
        </li>
    </ul>
    <div class="tab-content mt-3" id="settingsTabContent">
        <div class="tab-pane fade show active" id="main" role="tabpanel" aria-labelledby="main-tab">
            {% set previous_title = '' %}
            {% for mt in mediawithtext %}
                {% if mt.page_name == "mainpage" %}
                    {% if mt.title != previous_title %}
                        <!-- Eğer title değiştiyse, yeni bir div başlatılır -->
                        <div class="container mt-5 border p-3">
                            <h3>{{ mt.title }}</h3> <!-- Başlık her title değiştiğinde gösterilir -->
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Başlık</th>
                                        <th scope="col">Mesaj</th>
                                        <th scope="col">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{ mt.label }}</td>
                                        <td>{{ mt.text_message }}</td>
                                        <td>
                                            <a href="/updatetextandmedia/{{mt.id}}" class="btn btn-sm btn-primary"><i
                                                    class="fa fa-pencil"></i>Düzenle</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <img src="{{ mt.image_path if mt.image_path else '../../static/img/noImage.jpg' }}" alt="main image"
                                class="img-thumbnail" style="width: 100px; height: 100px;">
                        </div>
                        {% set previous_title = mt.title %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
        <div class="tab-pane fade" id="services" role="tabpanel" aria-labelledby="services-tab">
            {% set previous_title = '' %}
            {% for mt in mediawithtext %}
                {% if mt.page_name == "servicespage" %}
                    {% if mt.title != previous_title %}
                        <!-- Eğer title değiştiyse, yeni bir div başlatılır -->
                        <div class="container mt-5 border p-3">
                            <h3>{{ mt.title }}</h3> <!-- Başlık her title değiştiğinde gösterilir -->
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Başlık</th>
                                        <th scope="col">Mesaj</th>
                                        <th scope="col">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{ mt.label }}</td>
                                        <td>{{ mt.text_message }}</td>
                                        <td>
                                            <a href="/updatetextandmedia/{{mt.id}}" class="btn btn-sm btn-primary"><i
                                                    class="fa fa-pencil"></i>Düzenle</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <img src="{{ mt.image_path if mt.image_path else '../../static/img/noImage.jpg' }}" alt="main image"
                                class="img-thumbnail" style="width: 100px; height: 100px;">
                        </div>
                        {% set previous_title = mt.title %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
        <div class="tab-pane fade" id="archive" role="tabpanel" aria-labelledby="archive-tab">
            {% set previous_title = '' %}
            {% for mt in mediawithtext %}
                {% if mt.page_name == "archivepage" %}
                    {% if mt.title != previous_title %}
                        <!-- Eğer title değiştiyse, yeni bir div başlatılır -->
                        <div class="container mt-5 border p-3">
                            <h3>{{ mt.title }}</h3> <!-- Başlık her title değiştiğinde gösterilir -->
                            <table class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th scope="col">Başlık</th>
                                        <th scope="col">Mesaj</th>
                                        <th scope="col">İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{ mt.label }}</td>
                                        <td>{{ mt.text_message }}</td>
                                        <td>
                                            <a href="/updatetextandmedia/{{mt.id}}" class="btn btn-sm btn-primary"><i
                                                    class="fa fa-pencil"></i>Düzenle</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <img src="{{ mt.image_path if mt.image_path else '../../static/img/noImage.jpg' }}" alt="main image"
                                class="img-thumbnail" style="width: 100px; height: 100px;">
                        </div>
                        {% set previous_title = mt.title %}
                    {% endif %}
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll("#settingsTab .nav-link");
        const tabPanes = document.querySelectorAll(".tab-pane");

        tabs.forEach(tab => {
            tab.addEventListener("click", function (e) {
                e.preventDefault();

                // Tüm sekmeleri pasif hale getir
                tabs.forEach(t => t.classList.remove("active"));
                tabPanes.forEach(pane => pane.classList.remove("show", "active"));

                // Seçilen sekmeyi aktif hale getir
                this.classList.add("active");
                const targetPane = document.querySelector(this.dataset.bsTarget);
                targetPane.classList.add("show", "active");
            });
        });
    });
</script>
{% endblock %}